- hosts: control_plane[0]
  roles:
    - role: monitoring/kube-prometheus
      tags:
        - kube-prometheus
        - kube
  tasks:
    - name: deploy local manifests
      import_role:
        name: kubectl
      vars:
        source_role: monitoring
        file_type: fileglob
        target_fileglob: "{{ playbook_dir }}/../files/monitoring/*"
      tags:
        - kube

- hosts: telegraf
  roles:
    - monitoring/telegraf
  tags:
    - telegraf