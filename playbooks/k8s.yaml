- hosts: control_plane[0]
  vars:
    cluster_node_count: "{{ groups['cluster'] | length }}"
    control_plane_node_count: "{{ groups['control_plane'] | length }}"
  roles:
  - cni
  - storage
  - name: metallb
    when: (loadbalancer_provider | default('none')) == 'metallb'
  - cert-manager
  - ingress
  - monitoring