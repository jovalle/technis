- name: deploy kube-prometheus
  import_role:
    name: kubectl
  vars:
    target_list:
    - prometheus-operator.yaml
    - prometheus.yaml
    - alertmanager.yaml
    - kube-state-metrics.yaml
    - node-exporter.yaml
    - grafana.yaml
    source_role: monitoring/kube-prometheus
    file_type: static

- name: deploy kube-prometheus ingress
  import_role:
    name: kubectl
  vars:
    target_list:
    - prometheus-ingress.yaml
    - grafana-ingress.yaml
    source_role: monitoring/kube-prometheus
    file_type: template