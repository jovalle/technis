- name: install packages on RHEL-based OS
  yum:
    name: "{{ target_package | default(required_packages) }}"
    state: present
    allow_downgrade: yes
  when: ansible_distribution == 'CentOS' or ansible_distribution == 'Red Hat Enterprise Linux'

- name: install package on Debian-based OS
  apt:
    name: "{{ target_package | default(required_packages) }}"
    state: present
    force: yes
  when: ansible_distribution == 'Debian' or ansible_distribution == 'Ubuntu'

- name: install pip modules
  pip:
    name: "{{ target_module | default(required_pip_modules) }}"
