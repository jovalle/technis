---
- name: Ensure monitoring tools are installed
  ansible.builtin.apt:
    name:
      - smartmontools
      - lm-sensors
    state: present

- name: Detect available sensors
  ansible.builtin.command: sensors-detect --auto
  changed_when: false
  failed_when: false

- name: Enable and start smartd
  ansible.builtin.service:
    name: smartd
    enabled: true
    state: started
